<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>GrayBat: Communication Policy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GrayBat
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Graph Approach for Highly Generic Communication Schemes Based on Adaptive Topologies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('communicationPolicy.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Communication Policy </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The communication policy is a class which implements the communication interface of its host class (<a class="el" href="cage.html">cage</a>).</p>
<p>Communication in GrayBat is modeled in the way, that an instance that takes part on whatever communication is called a <em>peer</em>. All peers that want to communicate in some way with each other need to group up in a <a class="el" href="context.html">context</a>. Therefore, a <a class="el" href="context.html">context</a> is a set of peers that are able to communicate with each other.</p>
<p>By communication is meant the exchange of arbitrary data between peers or even within one peer. Thus, communication can mean sending a message over the internet, copying data between two memories, or distributing data with the help of MPI. Therefore, a communication policy need to implement the required interface but can interpret the term communication on its own. See the code example below or consider the preimplemented communication policies.</p>
<p>The communication policy interface is separated into the parts <b>point-to-point</b> <b>communication</b> , <b>collective communication</b> , and <b>context management</b> . The advice for completeness is to implement all methods of these three parts and run the provided unit test cases to verify their correctness. Nevertheless, not all communication methods might be necessary for a special use case and only a handful is really necessary to initialize the <a class="el" href="cage.html">cage</a>. Thus, it is possible to provide a communication policy implementation that does not implement all interface methods.</p>
<p>The basic set of methods that <b>need</b> to be implemented to initialize the <a class="el" href="cage.html">cage</a> are the following:</p>
<ul>
<li>Context Management<ul>
<li>getGlobalContext</li>
<li>createContext</li>
</ul>
</li>
<li>Collective Communication<ul>
<li>allGather</li>
<li>allReduce</li>
</ul>
</li>
<li>Type definitions<ul>
<li><a class="el" href="context.html">Context</a></li>
<li><a class="el" href="event.html">Event</a></li>
</ul>
</li>
</ul>
<p>The following source code provides a basic skeleton of a communication policy:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespacegraybat.html">graybat</a> {</div>
<div class="line"></div>
<div class="line">    <span class="keyword">namespace </span>communicationPolicy {</div>
<div class="line"></div>
<div class="line">        <span class="keyword">struct </span>CommunicationPolicySkeleton {</div>
<div class="line">            <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span>    VAddr;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Necessary type definitions</span></div>
<div class="line">            <span class="keyword">typedef</span> ContextImpl Context;</div>
<div class="line">            <span class="keyword">typedef</span> EventImpl   Event;</div>
<div class="line"></div>
<div class="line">            CommunicationPolicySkeleton(){</div>
<div class="line">                ...</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">/*********************************************************************************  </span></div>
<div class="line"><span class="comment">               Basic communication policy methods</span></div>
<div class="line"><span class="comment">               needed by the cage initialization</span></div>
<div class="line"><span class="comment">             *********************************************************************************/</span></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> allGather(<span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv, <span class="keyword">typename</span> T_Op&gt;  </div>
<div class="line">            <span class="keywordtype">void</span> allReduce(<span class="keyword">const</span> Context context, T_Op op, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            Context createContext(<span class="keyword">const</span> std::vector&lt;VAddr&gt; peers, <span class="keyword">const</span> Context oldContext){...}</div>
<div class="line"></div>
<div class="line">            Context getGlobalContext(){...}</div>
<div class="line"></div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">    } <span class="comment">/* namespace communicationPolicy*/</span></div>
<div class="line"></div>
<div class="line">} <span class="comment">/* namespace graybat */</span></div>
</div><!-- fragment --><p>The following source code provides the full skeleton of a communication policy:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespacegraybat.html">graybat</a> {</div>
<div class="line"></div>
<div class="line">    <span class="keyword">namespace </span>communicationPolicy {</div>
<div class="line"></div>
<div class="line">        <span class="keyword">struct </span>CommunicationPolicySkeleton {</div>
<div class="line">            <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span>    Tag;</div>
<div class="line">            <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span>    VAddr;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Necessary typedefinitions</span></div>
<div class="line">            <span class="keyword">typedef</span> ContextImpl Context;</div>
<div class="line">            <span class="keyword">typedef</span> EventImpl   Event;</div>
<div class="line"></div>
<div class="line">            CommunicationPolicySkeleton(){</div>
<div class="line">                ...</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">/*********************************************************************************  </span></div>
<div class="line"><span class="comment">               POINT TO POINT COMMUNICATION OPERATIONS</span></div>
<div class="line"><span class="comment">             *********************************************************************************/</span></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send&gt;</div>
<div class="line">            Event asyncSend(<span class="keyword">const</span> VAddr destVAddr, <span class="keyword">const</span> Tag tag, <span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send&gt;</div>
<div class="line">            <span class="keywordtype">void</span> send(<span class="keyword">const</span> VAddr destVAddr, <span class="keyword">const</span> Tag tag, <span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            Event asyncRecv(<span class="keyword">const</span> VAddr srcVAddr, <span class="keyword">const</span> Tag tag, <span class="keyword">const</span> Context context, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> recv(<span class="keyword">const</span> VAddr srcVAddr, <span class="keyword">const</span> Tag tag, <span class="keyword">const</span> Context context, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="comment">/*********************************************************************************  </span></div>
<div class="line"><span class="comment">               COLLECTIVE COMMUNICATION OPERATIONS</span></div>
<div class="line"><span class="comment">             *********************************************************************************/</span></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> gather(<span class="keyword">const</span> VAddr rootVAddr, <span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> allGather(<span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> gatherVar(<span class="keyword">const</span> VAddr rootVAddr, <span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData, std::vector&lt;unsigned&gt;&amp; recvCount){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> allGatherVar(<span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData, std::vector&lt;unsigned&gt;&amp; recvCount){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> scatter(<span class="keyword">const</span> VAddr rootVAddr, <span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> allToAll(<span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv, <span class="keyword">typename</span> T_Op&gt;</div>
<div class="line">            <span class="keywordtype">void</span> reduce(<span class="keyword">const</span> VAddr rootVAddr, <span class="keyword">const</span> Context context, <span class="keyword">const</span> T_Op op, <span class="keyword">const</span> T_Send&amp; sendData, <span class="keyword">const</span> T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_Send, <span class="keyword">typename</span> T_Recv, <span class="keyword">typename</span> T_Op&gt;  </div>
<div class="line">            <span class="keywordtype">void</span> allReduce(<span class="keyword">const</span> Context context, T_Op op, <span class="keyword">const</span> T_Send&amp; sendData, T_Recv&amp; recvData){...}</div>
<div class="line"></div>
<div class="line">            <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T_SendRecv&gt;</div>
<div class="line">            <span class="keywordtype">void</span> broadcast(<span class="keyword">const</span> VAddr rootVAddr, <span class="keyword">const</span> Context context, <span class="keyword">const</span> T_SendRecv&amp; data){...}</div>
<div class="line"></div>
<div class="line">            <span class="keywordtype">void</span> synchronize(<span class="keyword">const</span> Context context){...}</div>
<div class="line"></div>
<div class="line">            <span class="comment">/*********************************************************************************  </span></div>
<div class="line"><span class="comment">               CONTEXT MANAGEMENT OPERATIONS</span></div>
<div class="line"><span class="comment">             *********************************************************************************/</span></div>
<div class="line">            Context createContext(<span class="keyword">const</span> std::vector&lt;VAddr&gt; peers, <span class="keyword">const</span> Context oldContext){...}</div>
<div class="line"></div>
<div class="line">            Context getGlobalContext(){...}</div>
<div class="line"></div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">    } <span class="comment">/* namespace communicationPolicy*/</span></div>
<div class="line"></div>
<div class="line">} <span class="comment">/* namespace graybat */</span></div>
</div><!-- fragment --><h2>Further Links</h2>
<ul>
<li><a class="el" href="context.html">Context</a></li>
<li><a class="el" href="event.html">Event</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="cage.html">Communication and Graph Environment</a></li>
    <li class="footer">Generated on Wed Apr 29 2015 13:55:23 for GrayBat by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
